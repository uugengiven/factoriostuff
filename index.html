<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Factorio</title>
    <style>
        body {
            background-color: whitesmoke;
        }
        .factoryCell {
            width: 50px;
            height: 50px;
            background-color: black;
            display: inline-block;
            padding: 0;
            margin: 0;
            border: solid 1px #999999;
            box-sizing: border-box;
        }

        #plan {
            background-color: blue;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            width: fit-content;
        }
        .row {
            line-height: 0;
            width: fit-content;
        }
    </style>
    <script>
        const init = () => {
            const plan = document.getElementById("plan");
            const size = Number(document.getElementById("size").value);
            let newGrid = "";
            for(let y = 0; y < size; y++)
            {
                newGrid += `<div class="row">`
                for(let x = 0; x < size; x++)
                {
                    newGrid += `<div class="factoryCell" id="${y}-${x}" onmousedown="clickBox(id, event)" oncontextmenu="RclickBox(id, event)"></div>`
                }
                newGrid += `</div>`
            }

            plan.innerHTML = newGrid;
        }

        const clickBox = (id, e) => {
            console.log(e);
            const box = document.getElementById(id);
            // if button is 0, left click
            // if button is 1, middle click
            // if button is 2, right click
            if(e.button === 0)
            {
                box.style.backgroundColor = "red"
            }
            else if(e.button === 1)
            {
                box.style.backgroundColor = "black"
                
            }
            else if(e.button === 2)
            {
                if (box.style.backgroundColor === "black")
                {return}
                else if (box.style.backgroundColor === "red")
                {box.style.backgroundColor = "blue"}
                else if (box.style.backgroundColor === "blue")
                {box.style.backgroundColor = "purple"}
            }
        }
        const RclickBox = (id, e) => {
            console.log("RclickBox");
            e.preventDefault();
            // const box = document.getElementById(id);
            // if(box.style.backgroundColor==="blue")
            // {box.style.backgroundColor = "black"}
            // else
            // {box.style.backgroundColor = "blue";}
            return false;
        }
    </script>
</head>
<body>
    <h1>Factorio Blueprint Thing</h1>
    <input type="number" value="10" id="size" />
    <button onclick="init()">Make Grid</button>
    <div id="plan">
    </div>
</body>
</html>